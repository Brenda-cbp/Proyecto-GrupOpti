{"changed":false,"filter":false,"title":"Implementación.mos","tooltip":"/Implementación.mos","value":"!@encoding CP1252\r\nmodel ModelName\r\nuses \"mmxprs\"; !gain access to the Xpress-Optimizer solver\r\n\r\n\tparameters\r\n\t\tinputFile=\"Parametros.txt\"\r\n\t\toutputfile=\"Resultados.txt\"\r\n\tend-parameters\r\n\t\r\n\tdeclarations\r\n\t\t!Conjuntos\r\n\t\t\tM:set of string \t\t\t!Conjunto de M�quinas. \r\n\t\t\tO:set of string\t\t\t\t!Conjunto de Obras.\r\n\t\t\tD=1..25\t\t\t\t\t\t!Conjunto de d�as.\r\n\t\t\tN:dynamic array(O)of set of string\t!Subconjunto de m�quinas que se deben utilizar antes de la m�quina 7 en la obra o en O.\r\n\t\r\n\t\t!Par�metros\r\n\t\t\t\r\n\t\t\tt:dynamic array(O)of integer\t\t!Tiempo estipulado de finalizaci�n de la obra o en O.\r\n\t\t\tp:dynamic array(M,O)of integer\t\t!N�mero de d�as en que se necesita la m�quina m en M en la obra o en O.\r\n\t\t\tc:dynamic array(O)of integer\t\t!Costo diario por retraso de la obra o en O.\r\n\t\t\t\t\t\r\n\t\t!Variables de decisi�n\r\n\t\r\n\t\t\tx:array(M,O,D)of mpvar \t\t!Toma el valor de 1 si se asigna la m�quina m en M a la obra o en O en el d�a d en D. 0 dlc.\r\n\t\t\ty:array(O)of mpvar\t\t\t!N�mero de d�as de retraso de la obra o en O.\r\n\t\t\tz:array(M,O,D)of mpvar\t\t!Toma el valor de 1 si la m�quina m en M empieza a operar en la obra o en O el d�a d en D. 0 dlc.\r\n\tend-declarations\r\n\t\r\n\t!Inicializar par�metros\r\n\tinitializations from inputFile\r\n\t\tt p c N\r\n\tend-initializations\r\n\t\r\n\t!Creaci�n de variables\r\n\t\tforall(m in M, o in O, d in D)do\r\n\t\t\tx(m,o,d)is_binary\r\n\t\t\tz(m,o,d)is_binary\r\n\t\tend-do\r\n\t\t\r\n\t\tforall(o in O)do\r\n\t\t\ty(o)is_integer\r\n\t\tend-do\r\n\r\n    !Restricciones\r\n    !Se debe utilizar cierta cantidad de d?as cada m?quina en cada obra\r\n    forall(o in O, m in M)\r\n    sum(d in D)x(m,o,d)=p(m,o)\r\n\r\n\t!En un d?a no se puede usar la misma m?quina m?s de una vez\r\n    forall(m in M, d in D)\r\n    sum(o in O)x(m,o,d)<=1\r\n\r\n    !La m?quina 7 debe ser la ?ltima en asignarse en cada obra\r\n    forall(d in D, o in O)\r\n    getsize(N(o))*z(\"M7\",o,d)<=sum(r in 1 ..d-1,k in N(o))z(k,o,r)\r\n\r\n    !Las m?quinas deben usarse continuamente(deben durar en cada obra los d?as que se necesitan)\r\n    forall(o in O, m in M, d in D|d<=getsize(D)-p(m,o)+1)\r\n    sum(h in d..d+p(m,o)-1)x(m,o,h)>=p(m,o)*z(m,o,d)\r\n\r\n    !Asignar valor a la variable de retrasos\r\n    forall(o in O, m in M)\r\n    y(o)=sum(d in D)z(\"M7\",o,d)*(d+p(\"M7\",o))-t(o)\r\n\r\n    !Solo se puede trabajar una m?quina a la vez en cada obra\r\n    forall(o in O, d in D)\r\n    sum(m in M)x(m,o,d)<=1\r\n\r\n    !Todas las obras deben hacerse\r\n    forall(o in O)\r\n    sum(d in D)z(\"M7\",o,d)=1\r\n\r\n!Funci?n objetivo\r\n    FO:=sum(o in O)y(o)\r\n    minimize(FO)\r\n\r\n!Impresi?n\r\n    !Se deben sumar en los valores positivos de y\r\n    writeln(\"CostoReducido: \",sum(o in O|getsol(y(o))>=0)getsol(y(o))*c(o))\r\n    write(\"0|\")\r\n    forall(d in D)do\r\n        write(d,\"|\")\r\n    end-do\r\n    writeln(\"\")\r\n    forall(o in O|t(o)>0)do\r\n        write(o,\"|\")\r\n        forall(d in D)do\r\n            forall(m in M)do\r\n            if (getsol(x(m,o,d))=1) then\r\n                write(m,\"|\")\r\n            end-if\r\n        end-do\r\n        if(sum(m in M)getsol(x(m,o,d))=0) then\r\n            write(\"-|\")\r\n        end-if\r\n        end-do\r\n        writeln(\"\")\r\n    end-do\r\n    writeln(\"Costo de retraso por obra\")\r\n    forall(o in O | t(o)>0)do\r\n        if getsol(y(o))>0 then\r\n            writeln(o, \"|\", getsol(y(o))*c(o))\r\n        else\r\n            writeln(o,\"|\",0)\r\n        end-if\r\n    end-do\r\n\r\n \t!Impresi�n en archivo txt\r\n \tfopen(outputfile, F_OUTPUT)\r\n    writeln(\"CostoReducido: \",sum(o in O|getsol(y(o))>=0)getsol(y(o))*c(o))\r\n    write(\"0|\")\r\n    forall(d in D)do\r\n        write(d,\"|\")\r\n    end-do\r\n    writeln(\"\")\r\n    forall(o in O|t(o)>0)do\r\n        write(o,\"|\")\r\n        forall(d in D)do\r\n            forall(m in M)do\r\n            if (getsol(x(m,o,d))=1) then\r\n                write(m,\"|\")\r\n            end-if\r\n        end-do\r\n        if(sum(m in M)getsol(x(m,o,d))=0) then\r\n            write(\"-|\")\r\n        end-if\r\n        end-do\r\n        writeln(\"\")\r\n    end-do\r\n    writeln(\"Costo de retraso por obra\")\r\n    forall(o in O | t(o)>0)do\r\n        if getsol(y(o))>0 then\r\n            writeln(o, \"|\", getsol(y(o))*c(o))\r\n        else\r\n            writeln(o,\"|\",0)\r\n        end-if\r\n    end-do\r\n\r\nend-model","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":1206,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":85,"state":"start","mode":"plugins/fico.ide.language.mosel/mode/mosel"}},"timestamp":1589429582000}